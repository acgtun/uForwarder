/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'uforwarder.java-application-conventions'
    id "org.springframework.boot" version '2.7.11'
}

dependencies {
    implementation 'io.grpc:grpc-core'
    implementation 'io.grpc:grpc-netty-shaded'
    implementation 'io.grpc:grpc-services'
    implementation 'io.grpc:grpc-stub'
    implementation 'org.apache.kafka:kafka-clients'
    implementation 'org.apache.logging.log4j:log4j-core'
    implementation 'org.springframework.boot:spring-boot'
    implementation 'org.springframework.boot:spring-boot-autoconfigure'
    implementation 'org.springframework.boot:spring-boot-configuration-processor'
    implementation 'org.springframework.boot:spring-boot-starter'
    implementation 'org.slf4j:slf4j-api'
    implementation project(':uforwarder-client')
    implementation project(':idl')
    testImplementation project(':fievel-common')
    testImplementation 'io.grpc:grpc-testing'
    testImplementation 'org.apache.curator:curator-test'
    testImplementation 'org.awaitility:awaitility'
    testImplementation 'org.mockito:mockito-core'
    testImplementation 'org.mockito:mockito-inline'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
    testRuntimeOnly "org.junit.vintage:junit-vintage-engine"
    integrationTestImplementation 'com.101tec:zkclient'
    integrationTestImplementation project
}

tasks.named("bootJar") {
    archiveBaseName = 'sample-consumer-boot'
}

tasks.named("jar") {
    archiveClassifier = ''
}

project.afterEvaluate {
    //TODO: add test coverage for sample consumer
    check.dependsOn -= jacocoTestCoverageVerification
}
